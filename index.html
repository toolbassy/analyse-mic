<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <link rel="icon" type="image/x-icon" href="https://oiltest.report/assets/favicon%20orange-eb36b919657e9e014dd9f7e3a146b15c59d64b9ee43db4d88d05017fe4168f86.ico">
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Minerclient</title>
  <style>
    :root{
      --bg:#ffffff; --text:#111827; --muted:#6b7280; --accent:#0f62fe;
      --border:#e5e7eb; --panel:#ffffff; --panel-2:#f9fafb; --shadow:0 10px 30px rgba(15,23,42,.06); --radius:14px;
    }
    *{box-sizing:border-box} html,body{height:100%}
    body{margin:0; font:15px/1.65 ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Arial,"Noto Sans"; color:var(--text); background:var(--bg)}
    .container{max-width:1080px; margin:28px auto 40px; padding:0 20px}
    header{display:flex;align-items:center;gap:14px;margin-bottom:12px}
    .logo{display:flex;align-items:center;gap:10px;font-weight:800;letter-spacing:.2px}
    h1{font-size:20px;margin:0}
    .notice{background:var(--panel);border:1px solid var(--border);border-radius:var(--radius);box-shadow:var(--shadow);padding:18px}
    .notice p{margin:0 0 10px}
    .notice code{background:#eef2ff;border:1px solid #dbe2ff;color:#1e3a8a;padding:2px 6px;border-radius:6px}
    .tools{display:flex;gap:8px;flex-wrap:wrap;margin-top:8px}
    .btn{appearance:none;border:1px solid var(--border);background:var(--panel-2);color:#1f2937;padding:8px 12px;border-radius:10px;cursor:pointer;text-decoration:none}
    .btn:hover{filter:brightness(1.03)}
    .btn.primary{border-color:#bfd3ff;background:#e8f0ff;color:#0f2a7a}
    .viewer{margin-top:22px;background:var(--panel);border:1px solid var(--border);border-radius:var(--radius);box-shadow:var(--shadow)}
    .viewer-hd{display:flex;align-items:center;justify-content:space-between;gap:10px;flex-wrap:wrap;padding:12px 14px;border-bottom:1px solid var(--border)}
    .viewer-hd .title{font-weight:600;color:#374151}
    .viewer-bd{height:calc(100vh - 260px); min-height:1180px}
    .viewer-bd .pdf{width:100%;height:100%;border:0;border-radius:0 0}
    .viewer-fallback{padding:18px;color:var(--muted)}
    @media (max-width: 820px){ .viewer-bd{height:72vh} }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <div class="flex-shrink-0 flex items-center mr-2">
        <img class="h-5 w-auto" src="https://oiltest.report/images/micgsm-logo-3-web-bw.png" alt="" style="width:100px">
      </div>
    </header>

    <section class="notice">
      <p>Пожалуйста, удостоверьтесь, что оригинальный протокол, представленный на этом сайте, идентичен тому, что у Вас в руках.</p>
      <p>Также проверьте, что страница открылась именно в домене: "https://oiltest.report". Любой другой адрес и протокол будут считаться неоригинальными.</p>
    </section>

    <section class="viewer" aria-label="PDF отчёт">

      <div class="viewer-bd" id="viewerBody">
        <embed id="pdfViewer" class="pdf" src="ГПА-1.pdf" type="application/pdf" />
        <div id="pdfFallback" class="viewer-fallback" hidden>
          Не удалось встроить PDF. <a id="pdfLink" href="ГПА-1.pdf" download>Скачать файл</a>
        </div>
      </div>
    </section>
  </div>

  <script>
    (function () {
      const PDFS = {
        "47": { src: "ГПА-1.pdf", label: "ГПА-1.pdf" },
        "59": { src: "ГПА-2.pdf", label: "ГПА-2.pdf" },
        "72": { src: "ГПА-3.pdf", label: "ГПА-3.pdf" }
      };

      let viewer = document.getElementById('pdfViewer');
      const fallback = document.getElementById('pdfFallback');
      const link = document.getElementById('pdfLink');
      const nameEl = document.getElementById('pdfName');

      function setPdf(url, displayName) {
        if (viewer) viewer.src = url;
        if (link) link.href = url;
        if (nameEl) nameEl.textContent = displayName || url.split('/').pop();
        document.querySelectorAll('[data-doc]').forEach(a => {
          const isActive = url.endsWith(PDFS[a.getAttribute('data-doc')]?.src || '');
          a.classList.toggle('primary', !!isActive);
        });
      }

      function getDocKeyFromURL() {
        const p = new URLSearchParams(location.search);
        const key = p.get('doc') || p.get('pdf') || '1';
        return PDFS[key] ? key : '1';
      }

      function initFromURL() {
        const key = getDocKeyFromURL();
        const { src, label } = PDFS[key];
        setPdf(src, label);
      }

      document.querySelectorAll('a[data-doc]').forEach(a => {
        a.addEventListener('click', (e) => {
          e.preventDefault();
          const key = a.getAttribute('data-doc');
          if (!PDFS[key]) return;
          const { src, label } = PDFS[key];
          const url = new URL(location.href);
          url.searchParams.set('doc', key);
          history.pushState({ doc: key }, '', url.toString());
          setPdf(src, label);
        });
      });

      window.addEventListener('popstate', () => initFromURL());

      const downloadBtn = document.getElementById('downloadBtn');
      if (downloadBtn) {
        downloadBtn.addEventListener('click', () => {
          const a = document.createElement('a');
          const cleanSrc = (viewer.src || '').split('#')[0];
          a.href = cleanSrc;
          a.download = (nameEl && nameEl.textContent) || cleanSrc.split('/').pop();
          document.body.appendChild(a); a.click(); a.remove();
        });
      }

      const printBtn = document.getElementById('printBtn');
      if (printBtn) {
        printBtn.addEventListener('click', () => {
          window.open(viewer.src, '_blank');
        });
      }

      if (viewer && viewer.tagName === 'EMBED') {
        viewer.addEventListener('error', () => { viewer.hidden = true; fallback.hidden = false; });
      }

      initFromURL();
    })();
  </script>
</body>
</html>
